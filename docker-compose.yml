services:
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      # Database (Supabase)
      - ConnectionStrings__DefaultConnection=${DB_CONNECTION_STRING}
      # JWT
      - Jwt__Secret=${JWT_SECRET}
      - Jwt__ExpiryHours=${JWT_EXPIRY_HOURS:-8}
      - Jwt__Issuer=${JWT_ISSUER:-EmployeeHub}
      # Azure AD (optional)
      - AzureAd__ClientId=${AZURE_CLIENT_ID:-}
      - AzureAd__TenantId=${AZURE_TENANT_ID:-}
      # AI provider (optional)
      - Ai__Provider=${AI_PROVIDER:-}
      - Ai__Model=${AI_MODEL:-}
      - Ai__ApiKey=${AI_API_KEY:-}
      # CORS not needed â€” frontend served from same origin
      - AllowedOrigins=http://localhost:8080
      - ASPNETCORE_ENVIRONMENT=Production
    restart: unless-stopped
