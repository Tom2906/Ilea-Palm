services:
  app:
    build:
      context: .
      args:
        VITE_AZURE_CLIENT_ID: ${VITE_AZURE_CLIENT_ID}
        VITE_AZURE_TENANT_ID: ${VITE_AZURE_TENANT_ID}
    ports:
      - "8080:8080"
    environment:
      - ConnectionStrings__DefaultConnection=${DB_CONNECTION_STRING}
      - Jwt__Secret=${JWT_SECRET}
      - Jwt__ExpiryHours=${JWT_EXPIRY_HOURS:-8}
      - Jwt__Issuer=${JWT_ISSUER:-EmployeeHub}
      - Supabase__Url=${SUPABASE_URL:-}
      - Supabase__ServiceRoleKey=${SUPABASE_SERVICE_ROLE_KEY:-}
      - AzureAd__ClientId=${AZURE_CLIENT_ID:-}
      - AzureAd__TenantId=${AZURE_TENANT_ID:-}
      - AllowedOrigins=${ALLOWED_ORIGINS:-http://localhost:8080}
      - ASPNETCORE_ENVIRONMENT=Production
    restart: unless-stopped
